{"version":3,"sources":["webpack:///./src/components/AdminRestaurantForm.vue","webpack:///./src/components/AdminRestaurantForm.vue?3611","webpack:///./src/views/AdminRestaurantNew.vue","webpack:///./src/views/AdminRestaurantNew.vue?1fa4","webpack:///./src/apis/admin.js"],"names":["class","for","value","selected","disabled","isLoading","handleSubmit","id","restaurant","name","type","placeholder","required","categoryId","categories","category","key","tel","address","openingHours","description","rows","image","src","width","height","accept","handleFileChange","isProcessing","components","Spinner","props","initialRestaurant","Object","default","Boolean","data","watch","newValue","this","created","fetchCategories","methods","admin","get","fire","icon","title","e","files","target","length","imgUrl","window","URL","createObjectURL","form","formData","FormData","$emit","__exports__","render","handleAfterSubmit","is-processing","AdminRestaurantForm","restaurants","create","status","Error","message","$router","push","apiHelper","post","delete","update","put","users","userId","isAdmin","restaurantId","getDetail"],"mappings":"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","file":"js/chunk-84cc821a.ebe30f68.js","sourcesContent":["<template>\r\n  <Spinner v-if=\"isLoading\" />\r\n  <form \r\n    v-else\r\n    @submit.stop.prevent=\"handleSubmit\"\r\n  >\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name</label>\r\n      <input\r\n        id=\"name\"\r\n        v-model=\"restaurant.name\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"name\"\r\n        placeholder=\"Enter name\"\r\n        required\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"categoryId\">Category</label>\r\n      <select\r\n        id=\"categoryId\"\r\n        v-model=\"restaurant.categoryId\"\r\n        class=\"form-control\"\r\n        name=\"categoryId\"\r\n        required\r\n      >\r\n        <option value=\"\" selected disabled>--請選擇--</option>\r\n        <option\r\n          v-for=\"category in categories\"\r\n          :key=\"category.id\"\r\n          :value=\"category.id\"\r\n        >\r\n          {{ category.name }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"tel\">Tel</label>\r\n      <input\r\n        id=\"tel\"\r\n        v-model=\"restaurant.tel\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"tel\"\r\n        placeholder=\"Enter telephone number\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"address\">Address</label>\r\n      <input\r\n        id=\"address\"\r\n        v-model=\"restaurant.address\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        placeholder=\"Enter address\"\r\n        name=\"address\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"opening-hours\">Opening Hours</label>\r\n      <input\r\n        id=\"opening-hours\"\r\n        v-model=\"restaurant.openingHours\"\r\n        type=\"time\"\r\n        class=\"form-control\"\r\n        name=\"opening_hours\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        v-model=\"restaurant.description\"\r\n        class=\"form-control\"\r\n        rows=\"3\"\r\n        name=\"description\"\r\n      />\r\n    </div>\r\n    <!-- input type=\"file\" 可添加multiple屬性新增多筆檔案 -->\r\n    <div class=\"form-group\">\r\n      <label for=\"image\">Image</label>\r\n      <img\r\n        v-if=\"restaurant.image\"\r\n        :src=\"restaurant.image\"\r\n        class=\"d-block img-thumbnail mb-3\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n      />\r\n      <input\r\n        id=\"image\"\r\n        type=\"file\"\r\n        name=\"image\"\r\n        accept=\"image/*\"\r\n        class=\"form-control-file\"\r\n        @change=\"handleFileChange\"\r\n      />\r\n    </div>\r\n\r\n    <button \r\n      type=\"submit\" \r\n      class=\"btn btn-primary\"\r\n      :disabled=\"isProcessing\"\r\n    >\r\n      {{isProcessing? \"處理中...\" : \"送出\" }}\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport adminAPI from './../apis/admin'\r\nimport Spinner from './Spinner.vue'\r\nimport { Toast } from './../utils/helpers'\r\nexport default {\r\n  name: \"AdminRestaurantForm\",\r\n  components:{\r\n    Spinner\r\n  },\r\n  props: {\r\n    initialRestaurant: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          name: \"\",\r\n          categoryId: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n          description: \"\",\r\n          image: \"\",\r\n          openingHours: \"\",\r\n        };\r\n      },\r\n    },\r\n    isProcessing:{\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      restaurant: {\r\n        name: \"\",\r\n        categoryId: \"\",\r\n        tel: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n        image: \"\",\r\n        openingHours: \"\",\r\n      },\r\n      categories: [],\r\n      isLoading: true,\r\n    };\r\n  },\r\n  watch: {\r\n    // watch用來監聽adminRestaurantEdit是否已向後端AJAX到資料，並透過initialRestaurant傳進來\r\n    // watch並且有兩個參數newValue跟oldValue可以使用\r\n    initialRestaurant (newValue) {\r\n      this.restaurant = {\r\n        ...this.restaurant,\r\n        ...newValue\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchCategories();\r\n    this.restaurant = {\r\n      ...this.restaurant,\r\n      ...this.initialRestaurant\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchCategories() {\r\n      try{\r\n        this.isLoading = true\r\n        const { data } = await adminAPI.categories.get()\r\n        this.categories = data.categories;\r\n        this.isLoading = false\r\n      }catch(error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得餐廳類別，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    handleFileChange(e) {\r\n      if (!this.restaurant.name) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '請填寫餐廳名稱'\r\n        })\r\n        return\r\n      } else if (!this.restaurant.categoryId) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '請選擇餐廳類別'\r\n        })\r\n        return\r\n      }\r\n      const { files } = e.target;\r\n      // e.target.files 會是一個陣列，裡面可以取得使用者所有想要上傳的檔案，陣列裡都是該檔案的 Blob 物件，而不是一般的物件，但從中可以透過 name, size, type 取得該檔案的資訊。\r\n      if (files.length === 0) {\r\n        this.restaurant.image = \"\";\r\n      } else {\r\n        // window.URL.createObjectURL()為你的本機檔案來產生一個暫存的 URL，這並不是一個真正的網址，但是可以讓我們存取到本機圖片，並且暫時將圖片呈現在畫面上。\r\n        const imgUrl = window.URL.createObjectURL(files[0]);\r\n        this.restaurant.image = imgUrl;\r\n      }\r\n    },\r\n    handleSubmit(e) {\r\n      const form = e.target;\r\n      const formData = new FormData(form);\r\n      this.$emit(\"after-submit\", formData);\r\n    },\r\n  },\r\n};\r\n</script>","import { render } from \"./AdminRestaurantForm.vue?vue&type=template&id=25b1758c\"\nimport script from \"./AdminRestaurantForm.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurantForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\JackHuo\\\\WebDevelopment\\\\Project\\\\Vue\\\\forum-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n <div class=\"container py-5\">\r\n    <!-- 餐廳表單 AdminRestaurantForm -->\r\n    <AdminRestaurantForm \r\n      @after-submit=\"handleAfterSubmit\"\r\n      :is-processing=\"isProcessing\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AdminRestaurantForm from './../components/AdminRestaurantForm.vue'\r\nimport adminAPI from './../apis/admin'\r\nimport { Toast } from './../utils/helpers'\r\n\r\nexport default {\r\n  name: 'AdminRestaurantNew',\r\n  components: {\r\n    AdminRestaurantForm\r\n  },\r\n  data(){\r\n    return {\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods:{\r\n    async handleAfterSubmit(formData) {\r\n      this.isProcessing = true\r\n      try{\r\n        const { data } = await adminAPI.restaurants.create({ formData })\r\n        if( data.status !== 'success') {\r\n          throw new Error( data.message)\r\n        }\r\n        this.$router.push({ name: 'admin-restaurants' })\r\n        // 透過 API 將表單資料送到伺服器\r\n      }catch(error){\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法建立餐廳，請稍後再試'\r\n        })\r\n        this.isProcessing = false\r\n\r\n      }\r\n      \r\n    }\r\n  }\r\n}\r\n</script>","import { render } from \"./AdminRestaurantNew.vue?vue&type=template&id=63ceab08\"\nimport script from \"./AdminRestaurantNew.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurantNew.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\JackHuo\\\\WebDevelopment\\\\Project\\\\Vue\\\\forum-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { apiHelper } from \"../utils/helpers\";\r\n\r\nexport default {\r\n  categories: {\r\n    get() {\r\n      return apiHelper.get('/admin/categories')\r\n    },\r\n    create({name}) {\r\n      return apiHelper.post('/admin/categories' , { name })\r\n    },\r\n    delete(categoryId) {\r\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\r\n    },\r\n    update({ categoryId , name }){\r\n      return apiHelper.put(`/admin/categories/${categoryId}` , { name })\r\n    }\r\n  },\r\n  users:{\r\n    get(){\r\n      return apiHelper.get('/admin/users')\r\n    },\r\n    update({ userId, isAdmin }) {\r\n      return apiHelper.put(`/admin/users/${userId}`,{ isAdmin })\r\n    }\r\n  },\r\n  restaurants: {\r\n    create({ formData }) {\r\n      return apiHelper.post('/admin/restaurants' , formData)\r\n    },\r\n    get(){\r\n      return apiHelper.get('/admin/restaurants')\r\n    },\r\n    delete(restaurantId){\r\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    getDetail(restaurantId) {\r\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    update({ restaurantId, formData }) {\r\n      return apiHelper.put(`/admin/restaurants/${restaurantId}` , formData)\r\n    }\r\n  }\r\n}"],"sourceRoot":""}