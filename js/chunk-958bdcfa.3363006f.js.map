{"version":3,"sources":["webpack:///./src/views/AdminUsers.vue","webpack:///./src/views/AdminUsers.vue?2833","webpack:///./src/apis/admin.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/AdminNav.vue","webpack:///./src/components/AdminNav.vue?a4c6"],"names":["class","scope","width","isLoading","users","user","key","id","email","isAdmin","currentUser","type","toggleUserRole","name","components","AdminNav","Spinner","data","computed","created","this","fetchUsers","methods","admin","get","statusText","Error","fire","icon","title","userId","willBeAdmin","update","toString","status","map","__exports__","render","categories","apiHelper","create","post","delete","categoryId","put","restaurants","formData","restaurantId","getDetail","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","length","undefined","to","script"],"mappings":"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","file":"js/chunk-958bdcfa.3363006f.js","sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <!-- AdminNav Component -->\r\n    <AdminNav />\r\n    <Spinner v-if=\"isLoading\" />\r\n    <table\r\n      v-else \r\n      class=\"table\"\r\n    >\r\n      <thead class=\"thead-dark\">\r\n        <tr>\r\n          <th scope=\"col\">#</th>\r\n          <th scope=\"col\">Email</th>\r\n          <th scope=\"col\">Role</th>\r\n          <th scope=\"col\" width=\"140\">Action</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          v-for=\" user in users\"\r\n          :key=\"user.id\"\r\n        >\r\n          <th scope=\"row\">{{user.id}}</th>\r\n          <td>{{user.email}}</td>\r\n          <td>{{user.isAdmin? 'admin' : 'user'}}</td>\r\n          <td>\r\n            <button\r\n              v-if=\"currentUser.id !== user.id\"\r\n              type=\"button\"\r\n              class=\"btn btn-link\"\r\n              @click=\"toggleUserRole({userId: user.id, isAdmin: user.isAdmin})\"\r\n            >\r\n              {{ user.isAdmin ? 'set as user' : 'set as admin' }}\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AdminNav from \"./../components/AdminNav.vue\";\r\nimport Spinner from './../components/Spinner.vue'\r\nimport { mapState } from 'vuex'\r\nimport adminAPI from './../apis/admin'\r\nimport { Toast } from './../utils/helpers'\r\n\r\nexport default {\r\n  name: \"AdminUsers\",\r\n  components: {\r\n    AdminNav,\r\n    Spinner\r\n  },\r\n  data() {\r\n    return {\r\n      users: [],\r\n      isLoading:true\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n  created() {\r\n    this.fetchUsers()\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n        this.isLoading = true\r\n      try{\r\n        const { data, statusText } = await adminAPI.users.get()\r\n        if (statusText !== 'OK') {\r\n          throw new Error(statusText)\r\n        }\r\n        this.users = data.users\r\n        this.isLoading = false\r\n      }catch(error){\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得會員資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async toggleUserRole({ userId , isAdmin }){\r\n      try{\r\n        const willBeAdmin = !isAdmin\r\n        \r\n        const { data , statusText } = await adminAPI.users.update({ userId , isAdmin: willBeAdmin.toString() })\r\n        if (statusText !== 'OK' || data.status !== 'success') {\r\n          throw new Error(statusText)\r\n        }\r\n        this.users = this.users.map( user => {\r\n          if(user.id === userId){\r\n            return {\r\n              ...user,\r\n              isAdmin: willBeAdmin\r\n            }\r\n          }else{\r\n            return user\r\n          }\r\n        })\r\n      }catch(error) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法設成管理員，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>","import { render } from \"./AdminUsers.vue?vue&type=template&id=cc9e9908\"\nimport script from \"./AdminUsers.vue?vue&type=script&lang=js\"\nexport * from \"./AdminUsers.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\JackHuo\\\\WebDevelopment\\\\Project\\\\Vue\\\\forum-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { apiHelper } from \"../utils/helpers\";\r\n\r\nexport default {\r\n  categories: {\r\n    get() {\r\n      return apiHelper.get('/admin/categories')\r\n    },\r\n    create({name}) {\r\n      return apiHelper.post('/admin/categories' , { name })\r\n    },\r\n    delete(categoryId) {\r\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\r\n    },\r\n    update({ categoryId , name }){\r\n      return apiHelper.put(`/admin/categories/${categoryId}` , { name })\r\n    }\r\n  },\r\n  users:{\r\n    get(){\r\n      return apiHelper.get('/admin/users')\r\n    },\r\n    update({ userId, isAdmin }) {\r\n      return apiHelper.put(`/admin/users/${userId}`,{ isAdmin })\r\n    }\r\n  },\r\n  restaurants: {\r\n    create({ formData }) {\r\n      return apiHelper.post('/admin/restaurants' , formData)\r\n    },\r\n    get(){\r\n      return apiHelper.get('/admin/restaurants')\r\n    },\r\n    delete(restaurantId){\r\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    getDetail(restaurantId) {\r\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    update({ restaurantId, formData }) {\r\n      return apiHelper.put(`/admin/restaurants/${restaurantId}` , formData)\r\n    }\r\n  }\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\r\n  <div class=\"mb-3\">\r\n    <h1>餐廳後台</h1>\r\n    <router-link to=\"/admin/restaurants\">Restaurants</router-link> |\r\n    <router-link to=\"/admin/categories\">Categories</router-link> |\r\n    <router-link to=\"/admin/users\">Users</router-link>\r\n  </div>\r\n</template>","import { render } from \"./AdminNav.vue?vue&type=template&id=45e394ec\"\nconst script = {}\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\JackHuo\\\\WebDevelopment\\\\Project\\\\Vue\\\\forum-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}