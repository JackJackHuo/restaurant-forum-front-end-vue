(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71c50812"],{"73a3":function(t,e,n){"use strict";n.r(e);var a=n("7a23"),r={class:"container py-5"},c=Object(a["h"])(" New Restaurant ");function s(t,e,n,s,u,i){var o=Object(a["z"])("AdminNav"),b=Object(a["z"])("router-link"),d=Object(a["z"])("AdminRestaurantsTable");return Object(a["s"])(),Object(a["f"])("div",r,[Object(a["i"])(o),Object(a["i"])(b,{to:{name:"admin-restaurant-new"},class:"btn btn-primary mb-4"},{default:Object(a["H"])((function(){return[c]})),_:1}),Object(a["i"])(d)])}var u=n("e04c"),i=(n("b0c0"),{key:1,class:"table"}),o=Object(a["g"])("thead",{class:"thead-dark"},[Object(a["g"])("tr",null,[Object(a["g"])("th",{scope:"col"},"#"),Object(a["g"])("th",{scope:"col"},"Category"),Object(a["g"])("th",{scope:"col"},"Name"),Object(a["g"])("th",{scope:"col",width:"300"},"操作")])],-1),b={scope:"row"},d={class:"d-flex justify-content-between"},l=Object(a["h"])("Show"),j=Object(a["h"])("Edit"),O=["onClick"];function f(t,e,n,r,c,s){var u=Object(a["z"])("Spinner"),f=Object(a["z"])("router-link");return c.isLoading?(Object(a["s"])(),Object(a["d"])(u,{key:0})):(Object(a["s"])(),Object(a["f"])("table",i,[o,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["f"])(a["a"],null,Object(a["y"])(c.restaurants,(function(t){return Object(a["s"])(),Object(a["f"])("tr",{key:t.id},[Object(a["g"])("th",b,Object(a["B"])(t.id),1),Object(a["g"])("td",null,Object(a["B"])(t.Category?t.Category.name:"未分類"),1),Object(a["g"])("td",null,Object(a["B"])(t.name),1),Object(a["g"])("td",d,[Object(a["i"])(f,{to:{name:"admin-restaurant",params:{id:t.id}},class:"btn btn-link"},{default:Object(a["H"])((function(){return[l]})),_:2},1032,["to"]),Object(a["i"])(f,{to:{name:"admin-restaurant-edit",params:{id:t.id}},class:"btn btn-link"},{default:Object(a["H"])((function(){return[j]})),_:2},1032,["to"]),Object(a["g"])("button",{type:"button",class:"btn btn-link",onClick:Object(a["J"])((function(e){return s.deleteRestaurant(t.id)}),["stop","prevent"])},"Delete",8,O)])])})),128))])]))}var m=n("1da1"),g=(n("4de4"),n("d3b7"),n("96cf"),n("be6c")),p=n("2375"),h=n("2fa3"),v={name:"AdminRestaurantsTable",components:{Spinner:p["a"]},data:function(){return{restaurants:[],isLoading:!0}},created:function(){this.fetchRestaurants()},methods:{fetchRestaurants:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,g["a"].restaurants.get();case 4:n=e.sent,a=n.data,t.restaurants=a.restaurants,t.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.isLoading=!1,h["a"].fire({icon:"error",title:"無法取得餐廳資料，請稍後再試"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteRestaurant:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g["a"].restaurants.delete(t);case 3:if(a=n.sent,r=a.data,"success"===r.status){n.next=7;break}throw new Error(r.message);case 7:e.restaurants=e.restaurants.filter((function(e){return e.id!==t})),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),h["a"].fire({icon:"error",title:"無法刪除餐廳資料，請稍後再試"});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}},k=n("6b0d"),w=n.n(k);const R=w()(v,[["render",f]]);var y=R,x={name:"AdminRestaurants",components:{AdminNav:u["a"],AdminRestaurantsTable:y}};const A=w()(x,[["render",s]]);e["default"]=A},be6c:function(t,e,n){"use strict";n("b0c0");var a=n("2fa3");e["a"]={categories:{get:function(){return a["b"].get("/admin/categories")},create:function(t){var e=t.name;return a["b"].post("/admin/categories",{name:e})},delete:function(t){return a["b"].delete("/admin/categories/".concat(t))},update:function(t){var e=t.categoryId,n=t.name;return a["b"].put("/admin/categories/".concat(e),{name:n})}},users:{get:function(){return a["b"].get("/admin/users")},update:function(t){var e=t.userId,n=t.isAdmin;return a["b"].put("/admin/users/".concat(e),{isAdmin:n})}},restaurants:{create:function(t){var e=t.formData;return a["b"].post("/admin/restaurants",e)},get:function(){return a["b"].get("/admin/restaurants")},delete:function(t){return a["b"].delete("/admin/restaurants/".concat(t))},getDetail:function(t){return a["b"].get("/admin/restaurants/".concat(t))},update:function(t){var e=t.restaurantId,n=t.formData;return a["b"].put("/admin/restaurants/".concat(e),n)}}}},e04c:function(t,e,n){"use strict";var a=n("7a23"),r={class:"mb-3"},c=Object(a["g"])("h1",null,"餐廳後台",-1),s=Object(a["h"])("Restaurants"),u=Object(a["h"])(" | "),i=Object(a["h"])("Categories"),o=Object(a["h"])(" | "),b=Object(a["h"])("Users");function d(t,e){var n=Object(a["z"])("router-link");return Object(a["s"])(),Object(a["f"])("div",r,[c,Object(a["i"])(n,{to:"/admin/restaurants"},{default:Object(a["H"])((function(){return[s]})),_:1}),u,Object(a["i"])(n,{to:"/admin/categories"},{default:Object(a["H"])((function(){return[i]})),_:1}),o,Object(a["i"])(n,{to:"/admin/users"},{default:Object(a["H"])((function(){return[b]})),_:1})])}var l=n("6b0d"),j=n.n(l);const O={},f=j()(O,[["render",d]]);e["a"]=f}}]);
//# sourceMappingURL=chunk-71c50812.6ccb6b0a.js.map