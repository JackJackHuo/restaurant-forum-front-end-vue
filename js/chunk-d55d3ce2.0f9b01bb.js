(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d55d3ce2"],{"22ab":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),a={class:"container py-5"},c=Object(r["g"])("h1",{class:"mt-5"}," 美食達人 ",-1),o=Object(r["g"])("hr",null,null,-1),s={class:"row text-center"},i=["src"],u={class:"badge badge-secondary"},l={class:"mt-3"},b=["onClick"],d=["onClick"];function f(e,t,n,f,p,j){var O=Object(r["z"])("NavTabs"),w=Object(r["z"])("Spinner"),m=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["f"])("div",a,[Object(r["i"])(O),p.isLoading?(Object(r["s"])(),Object(r["d"])(w,{key:0})):(Object(r["s"])(),Object(r["f"])(r["a"],{key:1},[c,o,Object(r["g"])("div",s,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(p.users,(function(t){return Object(r["s"])(),Object(r["f"])("div",{key:t.id,class:"col-3"},[Object(r["i"])(m,{to:{name:"user",params:{id:t.id}}},{default:Object(r["H"])((function(){return[Object(r["g"])("img",{src:e.emptyImage(t.image)},null,8,i)]})),_:2},1032,["to"]),Object(r["g"])("h2",null,Object(r["B"])(t.name),1),Object(r["g"])("span",u,"追蹤人數："+Object(r["B"])(t.followerCount),1),Object(r["g"])("p",l,[t.isFollowed?(Object(r["s"])(),Object(r["f"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:Object(r["J"])((function(e){return j.unfollow(t.id)}),["stop","prevent"])}," 取消追蹤 ",8,b)):(Object(r["s"])(),Object(r["f"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:Object(r["J"])((function(e){return j.follow(t.id)}),["stop","prevent"])}," 追蹤 ",8,d))])])})),128))])],64))])}var p=n("5530"),j=n("1da1"),O=(n("96cf"),n("d81d"),n("8bb1")),w=n("2375"),m=n("1602"),g=n("2fa3"),v=n("2708"),h={name:"UserTop",mixins:[v["a"]],components:{NavTabs:O["a"],Spinner:w["a"]},data:function(){return{users:[],isLoading:!0}},created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,m["a"].getTopUsers();case 4:n=t.sent,r=n.data,e.users=r.users.map((function(e){return{id:e.id,name:e.name,image:e.image,followerCount:e.FollowerCount,isFollowed:e.isFollowed}})),e.isLoading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](1),e.isLoading=!1,g["a"].fire({icon:"error",title:"無法取得美食達人資料，請稍後再試"}),console.log("error",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},follow:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m["a"].addFollowing(e);case 3:if(r=n.sent,a=r.data,"success"===a.status){n.next=7;break}throw new Error(a.message);case 7:t.users=t.users.map((function(t){return t.id===e?Object(p["a"])(Object(p["a"])({},t),{},{followerCount:t.followerCount+1,isFollowed:!0}):t})),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),g["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},unfollow:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m["a"].deleteFollowing(e);case 3:if(r=n.sent,a=r.data,"success"===a.status){n.next=7;break}throw new Error(a.message);case 7:t.users=t.users.map((function(t){return t.id===e?Object(p["a"])(Object(p["a"])({},t),{},{followerCount:t.followerCount-1,isFollowed:!1}):t})),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),g["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}},k=n("6b0d"),x=n.n(k);const y=x()(h,[["render",f]]);t["default"]=y},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,c=n("1dde"),o=c("map");r({target:"Array",proto:!0,forced:!o},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-d55d3ce2.0f9b01bb.js.map